function manipularTabIndex(e){e.hasAttribute("tabindex")&&"-1"===e.getAttribute("tabindex")?e.removeAttribute("tabindex"):e.setAttribute("tabindex","-1");let t=e.children;for(let e=0;e<t.length;e++)manipularTabIndex(t[e]);}
function applyTabIndexRecursively(element){if(element.nodeType===Node.ELEMENT_NODE){if(!element.hasAttribute("tabindex")||element.getAttribute("tabindex")!=="-1"){element.setAttribute("tabindex","-1")}
Array.from(element.children).forEach(applyTabIndexRecursively)}}
function expanding_menu(){let e=window.location.href.includes("brickspreview");document.querySelectorAll(".bc-expanding-menu").forEach((t)=>{var n=t.getAttribute("data-open-builder");let r=t.getAttribute("data-customtoggle-lock-body-scrolling")==="1",o=t.querySelector(".bc-expanding-menu__expanding");var a=t.getAttribute("data-duration"),u=t.getAttribute("data-easing"),c=gsap.timeline({paused:!0});c.to(o,{onStart:function(){t.hasAttribute("data-aux-scale","1")&&t.removeAttribute("data-aux-scale","1")},duration:parseFloat(a),ease:u,scale:1,opacity:1,onReverseComplete:function(){t.setAttribute("data-aux-scale","1")},});let i=document.querySelectorAll(".bc-core-burguer"),d=t.querySelectorAll(".bc-core-burguer"),l=!1,s=t.getAttribute("data-customtoggle");if(!e){const observer=new MutationObserver((mutations)=>{mutations.forEach((mutation)=>{if(mutation.type==="childList"){mutation.addedNodes.forEach((node)=>{if(node.nodeType===Node.ELEMENT_NODE){applyTabIndexRecursively(node)}})}})});observer.observe(o,{childList:!0,subtree:!0})}
function p(){manipularTabIndex(o);if(d.length>0){d.forEach((e)=>{let n=e.querySelector("button").classList,r="";n.length>0&&(r=`${n[0]}--opened`);if(l){e.querySelector("button").classList.remove(r);e.querySelector("button").setAttribute("aria-expanded","false");o.style.pointerEvents="none";t.removeAttribute("data-open","bc-expanding-menu--opened");c.reverse();if(document.querySelector("html").hasAttribute("bc-core-burguer--body-toggled")){document.querySelector("html").removeAttribute("bc-core-burguer--body-toggled");if(window.lenisInstance){window.lenisInstance.start()}}}else{e.querySelector("button").classList.add(r);e.querySelector("button").setAttribute("aria-expanded","true");o.style.pointerEvents="all";t.setAttribute("data-open","bc-expanding-menu--opened");c.play()}})}
if(g){g.forEach((toggle)=>{if(toggle.classList.contains("bc-core-burguer")){let classesList=toggle.querySelector("button").classList;let opened=`${classesList[0]}--opened`;if(l){toggle.querySelector("button").classList.remove(opened);toggle.querySelector("button").setAttribute("aria-expanded","false");o.style.pointerEvents="none";t.removeAttribute("data-open","bc-expanding-menu--opened");c.reverse()}else{toggle.querySelector("button").classList.add(opened);toggle.querySelector("button").setAttribute("aria-expanded","true");o.style.pointerEvents="all";t.setAttribute("data-open","bc-expanding-menu--opened");c.play()}}else{if(l){toggle.classList.remove("opened");o.style.pointerEvents="none";t.removeAttribute("data-open","bc-expanding-menu--opened");c.reverse()}else{toggle.classList.add("opened");o.style.pointerEvents="all";t.setAttribute("data-open","bc-expanding-menu--opened");c.play()}}})}
l=!l}
function toggleBodyScroll(){if(r){if(document.querySelector("html").hasAttribute("bc-core-burguer--body-toggled")){if(window.lenisInstance){window.lenisInstance.start()}}else{if(window.lenisInstance){window.lenisInstance.stop()}}
document.querySelector("html").toggleAttribute("bc-core-burguer--body-toggled")}}
if(e&&n=="1"){c.play()}
manipularTabIndex(o);if(s){var g=document.querySelectorAll(s);g.forEach((element)=>{if(!element.hasAttribute("tabindex")){element.setAttribute("tabindex","0")}
element.addEventListener("click",function(){toggleBodyScroll();p()});element.addEventListener("keydown",function(event){if(event.key==="Enter"){toggleBodyScroll();p();event.stopImmediatePropagation()}})})}
document.addEventListener("click",function(e){o.contains(e.target)||(g&&Array.from(g).some((t)=>t.contains(e.target)))||(d&&Array.from(d).some((t)=>t.contains(e.target)))||(l&&p(),r&&document.querySelector("html").hasAttribute("bc-core-burguer--body-toggled")&&document.querySelector("html").removeAttribute("bc-core-burguer--body-toggled"))});d.forEach((e)=>{e.addEventListener("click",function(){p()})});window.location.href.includes("brickspreview")||document.addEventListener("keydown",function(e){l&&"Escape"===e.key&&p();r&&document.querySelector("html").hasAttribute("bc-core-burguer--body-toggled")&&document.querySelector("html").removeAttribute("bc-core-burguer--body-toggled")});o.addEventListener("focusout",function(e){if(e.relatedTarget&&!o.contains(e.relatedTarget)){l&&p()}})})}
document.addEventListener("DOMContentLoaded",function(e){bricksIsFrontend&&expanding_menu()})