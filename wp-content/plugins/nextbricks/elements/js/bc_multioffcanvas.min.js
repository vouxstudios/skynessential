function manipularTabIndex(t){if(!t||!t.hasAttribute)return;if(t.hasAttribute("tabindex")&&"-1"===t.getAttribute("tabindex")){t.removeAttribute("tabindex")}else{t.setAttribute("tabindex","-1")}
let e=t.children;for(let i=0;i<e.length;i++){manipularTabIndex(e[i])}}
function applyTabIndexRecursively(element){if(!element||element.nodeType!==Node.ELEMENT_NODE)return;if(!element.hasAttribute("tabindex")||element.getAttribute("tabindex")!=="-1"){element.setAttribute("tabindex","-1")}
Array.from(element.children).forEach(applyTabIndexRecursively)}
function multioffcanvasmenu(){let t=window.location.href.includes("brickspreview");document.querySelectorAll(".bc-multi-offcanvas-menu").forEach((e)=>{let toggleBody=e.getAttribute("data-customtoggle-lock-body-scrolling")==="1";let closeOnEsc=e.getAttribute("data-close-on-esc")==="1";var a=e.getAttribute("data-open-builder");let o=!1;var n=e.querySelector(".bc-multi-offcanvas-menu__items-wrapper"),r=e.querySelector(".bc-multi-offcanvas-menu__items-wrapper");e.getAttribute("data-type");let u=document.querySelectorAll(".bc-core-burguer"),c=e.querySelectorAll(".bc-multi-offcanvas-menu__subcanvas .bc-core-burguer"),i=e.querySelectorAll(".bc-core-burguer:not(.bc-multi-offcanvas-menu__subcanvas .bc-core-burguer)"),s=e.querySelector(".bc-multi-offcanvas-menu__backdrop"),l=!1,d=e.getAttribute("data-customtoggle");var b=d?d.replace(".",""):"";if(!t&&n){const observer=new MutationObserver((mutations)=>{mutations.forEach((mutation)=>{if(mutation.type==="childList"){mutation.addedNodes.forEach((node)=>{if(node.nodeType===Node.ELEMENT_NODE){applyTabIndexRecursively(node)}})}})});observer.observe(n,{childList:!0,subtree:!0})}
function f(){if(r){manipularTabIndex(r)}
i.forEach((t)=>{let button=t.querySelector("button");if(!button)return;let a=button.classList,o="";if(a.length>0){o=`${a[0]}--opened`}
if(l){button.classList.remove(o);button.setAttribute("aria-expanded","false");if(r)r.style.pointerEvents="none";e.removeAttribute("data-open","bc-multi-offcanvas-menu--opened")}else{button.classList.add(o);button.setAttribute("aria-expanded","true");if(r)r.style.pointerEvents="all";e.setAttribute("data-open","bc-multi-offcanvas-menu--opened")}
if(n&&n.hasAttribute("data-open")){n.toggleAttribute("data-open")}
p()});u.forEach((t)=>{if(!e.contains(t)&&t.classList.contains(b)){let button=t.querySelector("button");if(!button)return;let a=button.classList,o="";if(a.length>0){o=`${a[0]}--opened`}
if(l){button.classList.remove(o);button.setAttribute("aria-expanded","false");if(r)r.style.pointerEvents="none";e.removeAttribute("data-open","bc-multi-offcanvas-menu--opened")}else{button.classList.add(o);button.setAttribute("aria-expanded","true");if(r)r.style.pointerEvents="all";e.setAttribute("data-open","bc-multi-offcanvas-menu--opened")}
if(n&&n.hasAttribute("data-open")){n.toggleAttribute("data-open")}
p()}});if(!u.length||!c.length){if(l){if(r)r.style.pointerEvents="none";e.removeAttribute("data-open","bc-multi-offcanvas-menu--opened")}else{if(r)r.style.pointerEvents="all";e.setAttribute("data-open","bc-multi-offcanvas-menu--opened")}
if(n&&n.hasAttribute("data-open")){n.toggleAttribute("data-open")}
p()}
l=!l}
function p(){e.querySelectorAll(".bc-multi-offcanvas-menu__subcanvas").forEach((t)=>{if(t&&t.hasAttribute("data-open")){t.toggleAttribute("data-open")}})}
function g(t){e.querySelectorAll(".bc-multi-offcanvas-menu__subcanvas").forEach((e,a)=>{if(a!==t&&e&&e.hasAttribute("data-open")){e.toggleAttribute("data-open")}})}
if(t&&"1"==a){f()}
if(r){manipularTabIndex(r)}
function toggleBodyScroll(){if(toggleBody){let html=document.querySelector("html");if(html&&html.hasAttribute("bc-core-burguer--body-toggled")){if(window.lenisInstance)window.lenisInstance.start();}else{if(window.lenisInstance)window.lenisInstance.stop();}
if(html)html.toggleAttribute("bc-core-burguer--body-toggled");}}
if(d){var gs=document.querySelectorAll(d);gs.forEach((element)=>{if(!element.hasAttribute("tabindex")){element.setAttribute("tabindex","0")}
element.addEventListener("click",function(){toggleBodyScroll();f()});element.addEventListener("keydown",function(event){if(event.key==="Enter"){toggleBodyScroll();f();event.stopImmediatePropagation()}})})}
i.forEach((t)=>{let button=t.querySelector("button");if(button&&"1"==parseFloat(button.getAttribute("data-scroll"))){o=!0}
t.addEventListener("click",function(){f()})});if(!window.location.href.includes("brickspreview")){document.addEventListener("keydown",function(t){if("Escape"===t.key&&l&&closeOnEsc){f();let html=document.querySelector("html");if(html&&html.hasAttribute("bc-core-burguer--body-toggled")){html.removeAttribute("bc-core-burguer--body-toggled")}}});if(s){s.addEventListener("click",function(){f();let html=document.querySelector("html");if(html&&html.hasAttribute("bc-core-burguer--body-toggled")){html.removeAttribute("bc-core-burguer--body-toggled");if(window.lenisInstance)window.lenisInstance.start();}})}}
e.querySelectorAll(".bc-multi-offcanvas-menu__subcanvas").forEach((t,a)=>{var o=t.getAttribute("data-opentoggle"),r=t.getAttribute("data-closetoggle");if(o==r&&o){document.querySelectorAll(o).forEach((o)=>{if(e){new MutationObserver(function(t){t.forEach((t)=>{if("attributes"==t.type&&"data-open"==t.attributeName&&"bc-multi-offcanvas-menu--opened"===e.getAttribute("data-open")){if(o.classList.contains("bc-core-burguer")||o.setAttribute("tabindex","0"));}})}).observe(e,{attributes:!0,attributeOldValue:!0})}
o.addEventListener("mousedown",function(){event.preventDefault();g(a);if(n){if(n.hasAttribute("data-open")){if(n.hasAttribute("data-open")&&t.hasAttribute("data-open")){n.toggleAttribute("data-open")}}else{n.toggleAttribute("data-open")}}
if(t)t.toggleAttribute("data-open");c.forEach((e)=>{var button=e.querySelector("button");if(!button)return;let o=`${button.classList[0]}--opened`,n=e;while(n!==t&&n.parentNode){n=n.parentNode}
if(n===t){button.classList.toggle(o)}else{button.classList.remove(o)}})});o.addEventListener("keydown",function(e){if("Enter"===e.key){g(a);if(n){if(n.hasAttribute("data-open")){if(t.hasAttribute("data-open")){n.toggleAttribute("data-open")}}else{n.toggleAttribute("data-open")}}
if(t)t.toggleAttribute("data-open");var focusableElements=t.querySelectorAll('a, button, [tabindex="0"], [contenteditable="true"], input, select, textarea');if(focusableElements.length>0){focusableElements[0].focus()}
c.forEach((e)=>{var button=e.querySelector("button");if(!button)return;let o=`${button.classList[0]}--opened`,n=e;while(n!==t&&n.parentNode){n=n.parentNode}
if(n!==t){button.classList.remove(o)}})}});t.addEventListener("focusout",function(){o.focus()})})}else{if(o){document.querySelectorAll(o).forEach((o)=>{if(e){new MutationObserver(function(t){t.forEach((t)=>{if("attributes"==t.type&&"data-open"==t.attributeName&&"bc-multi-offcanvas-menu--opened"===e.getAttribute("data-open")){if(o.classList.contains("bc-core-burguer")||o.setAttribute("tabindex","0"));}})}).observe(e,{attributes:!0,attributeOldValue:!0})}
o.addEventListener("mousedown",function(){event.preventDefault();g(a);if(n&&!n.hasAttribute("data-open")){n.toggleAttribute("data-open")}
if(t&&!t.hasAttribute("data-open")){t.toggleAttribute("data-open")}
c.forEach((e)=>{var button=e.querySelector("button");if(!button)return;let o=`${button.classList[0]}--opened`,n=e;while(n!==t&&n.parentNode){n=n.parentNode}
if(n===t){button.classList.add(o)}else{button.classList.remove(o)}})});o.addEventListener("keydown",function(e){if("Enter"===e.key){g(a);if(n&&!n.hasAttribute("data-open")){n.toggleAttribute("data-open")}
if(t&&!t.hasAttribute("data-open")){t.toggleAttribute("data-open")}
var focusableElements=t.querySelectorAll('a, button, [tabindex="0"], [contenteditable="true"], input, select, textarea');if(focusableElements.length>0){focusableElements[0].focus()}
c.forEach((e)=>{var button=e.querySelector("button");if(!button)return;let o=`${button.classList[0]}--opened`,n=e;while(n!==t&&n.parentNode){n=n.parentNode}
if(n===t){button.classList.add(o)}else{button.classList.remove(o)}})}});t.addEventListener("focusout",function(){o.focus()})})}
if(r){document.querySelectorAll(r).forEach((t)=>{if(e){new MutationObserver(function(a){a.forEach((a)=>{if("attributes"==a.type&&"data-open"==a.attributeName&&"bc-multi-offcanvas-menu--opened"===e.getAttribute("data-open")){t.setAttribute("tabindex","0")}})}).observe(e,{attributes:!0,attributeOldValue:!0})}
t.addEventListener("mousedown",function(){event.preventDefault();p();if(n&&n.hasAttribute("data-open")){n.toggleAttribute("data-open")}
c.forEach((t)=>{var button=t.querySelector("button");if(!button)return;let a=`${button.classList[0]}--opened`;button.classList.toggle(a)})});t.addEventListener("keydown",function(t){if("Enter"===t.key){p();if(n&&n.hasAttribute("data-open")){n.toggleAttribute("data-open")}
c.forEach((t)=>{var button=t.querySelector("button");if(!button)return;let a=`${button.classList[0]}--opened`;button.classList.toggle(a)})}})})}}
if(window.location.href.includes("brickspreview")&&t.getAttribute("data-open-builder")==="1"){t.setAttribute("data-open","true");if(n)n.setAttribute("data-open","");}})})}
document.addEventListener("DOMContentLoaded",function(){if(typeof bricksIsFrontend!=='undefined'&&bricksIsFrontend){multioffcanvasmenu()}})