function next_audio_player(){document.querySelectorAll('.nb-audio-player').forEach(player=>{var title=player.querySelector('.nb-audio-player__name');var subtitle=player.querySelector('.nb-audio-player__artist');var timer=player.querySelector('.nb-audio-player__timer');var duration=player.querySelector('.nb-audio-player__duration');var playBtn=player.querySelector('.nb-audio-player__play');var pauseBtn=player.querySelector('.nb-audio-player__pause');var progress=player.querySelector('.nb-audio-player__progress');var progressContainer=player.querySelector('.nb-audio-player__progress-container');var source=player.getAttribute('data-source');var durationGSAP=parseFloat(player.getAttribute('data-duration'));var easeGSAP=player.getAttribute('data-ease');var Player=function(playlist){this.playlist=playlist;this.index=0;title.innerHTML=playlist[0].title;subtitle.innerHTML=playlist[0].subtitle};Player.prototype={play:function(index){var self=this;var sound;index=typeof index==='number'?index:self.index;var data=self.playlist[index];if(data.howl){sound=data.howl}
sound.play();title.innerHTML=data.title;subtitle.innerHTML=data.subtitle;self.index=index},pause:function(){var self=this;var sound=self.playlist[self.index].howl;sound.pause()},seeking:!1,step:function(){var self=this;var sound=self.playlist[self.index].howl;var seek=sound.seek()||0;var soundDuration=sound.duration()||0;seek=Math.min(seek,soundDuration);timer.innerHTML=self.formatTime(Math.round(seek));if(!self.seeking){var percentage=(((seek/soundDuration)*100)||0)+'%';gsap.to(progress,{width:percentage,duration:0.1,ease:"linear"})}
if(sound.playing()){requestAnimationFrame(self.step.bind(self))}},seek:function(per){var self=this;var sound=self.playlist[self.index].howl;if(sound.playing()||sound.state()==='loaded'){self.seeking=!0;sound.seek(sound.duration()*per);gsap.to(progress,{width:(per*100)+'%',duration:durationGSAP,ease:easeGSAP,onComplete:function(){self.seeking=!1}});timer.innerHTML=self.formatTime(Math.round(sound.duration()*per));if(sound.playing()){requestAnimationFrame(self.step.bind(self))}}},formatTime:function(secs){var minutes=Math.floor(secs/60)||0;var seconds=(secs-minutes*60)||0;return minutes+':'+(seconds<10?'0':'')+seconds}};var player=new Player([{title:player.querySelector('.nb-audio-player__name').innerHTML,subtitle:player.querySelector('.nb-audio-player__artist').innerHTML,howl:new Howl({src:[source],html5:!0,onload:function(){duration.innerHTML=player.formatTime(Math.round(this.duration()))},onplay:function(){requestAnimationFrame(player.step.bind(player))},onend:function(){pauseBtn.style.display='none';playBtn.style.display='flex'}})}]);playBtn.addEventListener('click',function(){player.play();playBtn.style.display='none';pauseBtn.style.display='flex'});pauseBtn.addEventListener('click',function(){player.pause();pauseBtn.style.display='none';playBtn.style.display='flex'});playBtn.addEventListener('keydown',function(event){if(event.key==='Enter'){player.play();playBtn.style.display='none';pauseBtn.style.display='flex'}});pauseBtn.addEventListener('keydown',function(event){if(event.key==='Enter'){player.pause();pauseBtn.style.display='none';playBtn.style.display='flex'}});progressContainer.addEventListener('click',function(event){var per=event.offsetX/progressContainer.offsetWidth;player.seek(per);var sound=player.playlist[player.index].howl;if(pauseBtn.style.display=='flex'){sound.play()}else{var sound=player.playlist[player.index].howl;var seekPosition=Math.round(sound.duration()*per);timer.innerHTML=player.formatTime(seekPosition)}});progressContainer.addEventListener('mousedown',function(){window.sliderDown=!0});document.addEventListener('mouseup',function(){window.sliderDown=!1});document.addEventListener('mousemove',function(event){if(window.sliderDown){var rect=progressContainer.getBoundingClientRect();var offsetX=event.clientX-rect.left;var per=Math.max(0,Math.min(1,offsetX/progressContainer.offsetWidth));player.seek(per)}});progressContainer.addEventListener('touchstart',function(){window.sliderDown=!0});document.addEventListener('touchend',function(){window.sliderDown=!1});document.addEventListener('touchmove',function(event){if(window.sliderDown){var touch=event.touches[0];var rect=progressContainer.getBoundingClientRect();var offsetX=touch.clientX-rect.left;var per=Math.max(0,Math.min(1,offsetX/progressContainer.offsetWidth));player.seek(per);event.preventDefault()}})})}
document.addEventListener("DOMContentLoaded",function(t){bricksIsFrontend&&next_audio_player()})