!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e||self).Reeller={})}(this,function(e){function t(){return t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},t.apply(this,arguments)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,s(e,t)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}var n=/*#__PURE__*/function(){function e(){this.events={}}var t=e.prototype;return t.on=function(e,t){this.events[e]instanceof Array||(this.events[e]=[]),this.events[e].push(t)},t.off=function(e,t){this.events[e]=t?this.events[e].filter(function(e){return e!==t}):[]},t.trigger=function(e){var t=arguments,i=this;this.events[e]&&this.events[e].forEach(function(e){return e.call.apply(e,[i,i].concat([].slice.call(t,1)))})},e}(),o=/*#__PURE__*/function(e){function s(i){var n;return(n=e.call(this)||this).options=t({},s.defaultOptions,i),n.container="string"==typeof n.options.container?document.querySelector(n.options.container):n.options.container,n.wrapper="string"==typeof n.options.wrapper?n.container.querySelector(n.options.wrapper):n.options.wrapper||n.options.container,n.item=[],n.refresh(!1),n.options.autoUpdate?n.bindResizeObserver():n.update(),n}i(s,e);var n=s.prototype;return n.bindResizeObserver=function(){var e=this;this.resizeObserver=new ResizeObserver(function(){e.update()}),this.resizeObserver.observe(this.container)},n.addClones=function(e,t){var i;void 0===t&&(t=0);for(var s=[],n=0;n<e;n++){var o=this.item[(t+n)%this.item.length].cloneNode(!0);o.classList.add(this.options.cloneClassName),s.push(o)}(i=this.wrapper).append.apply(i,s)},n.removeClones=function(e){void 0===e&&(e=0),Array.from(this.wrapper.getElementsByClassName(this.options.cloneClassName)).slice(-e).forEach(function(e){return e.remove()})},n.setClonesCount=function(e){this.clonesCount!==e&&(this.clonesCount<e&&this.addClones(e-this.clonesCount,this.clonesCount),this.clonesCount>e&&this.removeClones(this.clonesCount-e),this.clonesCount=e)},n.getCalcData=function(){var e={clonesCount:0,clonesWidth:0,containerWidth:this.container.offsetWidth,fullWidth:0,itemWidth:[],itemsWidth:0,lastIndex:0};this.item.map(function(t){var i=window.getComputedStyle(t),s=t.offsetWidth+parseInt(i.marginLeft)+parseInt(i.marginRight);e.itemWidth.push(s),e.itemsWidth+=s});for(var t=e.itemWidth.length,i=this.options.clonesOverflow?e.containerWidth:e.containerWidth-e.itemsWidth;i>e.clonesWidth||e.clonesCount<this.options.clonesMin||this.options.clonesFinish&&e.clonesCount%t>0;)e.lastIndex=e.clonesCount%t,e.clonesWidth+=e.itemWidth[e.lastIndex],e.clonesCount++;return e.fullWidth=e.clonesWidth+e.itemsWidth,e},n.update=function(){this.calcData=this.getCalcData(),this.setClonesCount(this.calcData.clonesCount),this.trigger("update",this.calcData)},n.refresh=function(e){void 0===e&&(e=!0),this.removeClones(),this.item=Array.from(this.container.querySelectorAll(this.options.itemSelector)),this.calcData={},this.clonesCount=0,this.trigger("refresh"),e&&this.update()},n.destroy=function(e){void 0===e&&(e=!1),e&&this.removeClones(),this.resizeObserver&&this.resizeObserver.disconnect(),this.trigger("destroy")},s}(n);o.defaultOptions={container:null,wrapper:null,itemSelector:null,cloneClassName:"-clone",autoUpdate:!0,clonesOverflow:!1,clonesFinish:!1,clonesMin:0};var r=/*#__PURE__*/function(e){function s(i){var n;return(n=e.call(this)||this).options=t({},s.defaultOptions,i),n.gsap=s.gsap||window.gsap,n.paused=n.options.paused,n.createFiller(),n.createTimeline(),n.options.autoStop&&n.bindIntersectionObserver(),n.options.plugins&&n.initPlugins(),n}i(s,e),s.registerGSAP=function(e){s.gsap=e},s.use=function(){[].slice.call(arguments).forEach(function(e){var t=e.pluginName;if("string"!=typeof t)throw new TypeError("Invalid plugin. Name is required.");s.plugins[t]=e})};var n=s.prototype;return n.createFiller=function(){var e=this;this.filler=new o(this.options),this.filler.on("update",function(t,i){e.invalidate(),e.trigger("update",i)}),this.filler.on("refresh",function(){e.trigger("refresh")})},n.createTimeline=function(){var e=this;return this.tl=new this.gsap.timeline({paused:this.options.paused,reversed:this.options.reversed,repeat:-1,yoyo:!this.options.loop,onReverseComplete:function(){this.progress(1)}}),this.gsap.set(this.filler.container,{overflow:"hidden"}),this.tl.fromTo(this.filler.wrapper,{x:function(){return e.options.clonesOverflow?-e.filler.calcData.itemsWidth:-(e.filler.calcData.fullWidth-e.filler.calcData.containerWidth)}},{x:0,duration:this.options.speed,ease:this.options.ease}),this.tl.seek(this.options.seek),this.tl},n.bindIntersectionObserver=function(){var e=this;this.intersectionObserver=new IntersectionObserver(function(t){t[0].isIntersecting?e.resume():e.pause()}),this.intersectionObserver.observe(this.filler.container)},n.initPlugins=function(){this.plugin={};for(var e=0,t=Object.entries(this.options.plugins);e<t.length;e++){var i=t[e],n=i[0],o=s.plugins[n];o?this.plugin[n]=new o(this,i[1]):console.error("Plugin "+n+" not found. Make sure you register it with Reeller.use()")}},n.destroyPlugins=function(){for(var e=0,t=Object.values(this.plugin);e<t.length;e++){var i=t[e];i.destroy&&i.destroy()}},n.resume=function(){this.gsap.set(this.filler.container,{z:"0"}),this.gsap.set(this.filler.wrapper,{willChange:"transform"}),this.paused=!1,this.tl.resume(),this.trigger("resume")},n.reverse=function(e){void 0===e&&(e=!0),this.tl.reversed(e),this.resume(),this.trigger("reverse",e)},n.pause=function(){this.gsap.set(this.filler.container,{clearProps:"z"}),this.gsap.set(this.filler.wrapper,{willChange:"auto"}),this.paused=!0,this.tl.pause(),this.trigger("pause")},n.invalidate=function(){this.tl.invalidate(),this.trigger("invalidate")},n.update=function(){this.filler.update()},n.refresh=function(e){void 0===e&&(e=!0),this.filler.refresh(e)},n.destroy=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),this.intersectionObserver&&this.intersectionObserver.disconnect(),this.options.plugins&&this.destroyPlugins(),this.tl.kill(),this.filler.destroy(e),t&&(this.gsap.set(this.filler.container,{clearProps:"overflow"}),this.gsap.set(this.filler.wrapper,{clearProps:"x,willChange"})),this.trigger("destroy")},s}(n);r.defaultOptions={container:null,wrapper:null,itemSelector:null,cloneClassName:"-clone",speed:10,ease:"none",initialSeek:10,loop:!0,paused:!0,reversed:!1,autoStop:!0,autoUpdate:!0,clonesOverflow:!0,clonesFinish:!1,clonesMin:0,plugins:null},r.plugins={};var l=/*#__PURE__*/function(){function e(i,s){this.options=t({},e.defaultOptions,s),this.reeller=i,this.gsap=this.reeller.gsap,this.tl=this.reeller.tl,this.init()}var i=e.prototype;return i.getScrollPos=function(){return this.options.scrollProxy?this.options.scrollProxy():window.pageYOffset},i.init=function(){var e=this,t=this.getScrollPos(),i=1,s=!0;this.tickerFn=function(){var n=e.getScrollPos(),o=n-t;if(e.options.bothDirection||(o=Math.abs(o)),e.options.reversed&&(o*=-1),e.reeller.paused)return i=Math.sign(o),t=n,s||(e.gsap.killTweensOf(e.tl),s=!0),void e.tl.timeScale(i*e.options.threshold);if(o){var r=o*e.options.multiplier,l=r>0?Math.max(e.options.threshold,r):Math.min(-e.options.threshold,r);e.tween=e.gsap.to(e.tl,{timeScale:l,duration:e.options.speed,ease:e.options.ease,overwrite:e.options.overwrite}),s=!1}else if(!s){var a=e.options.stopOnEnd?0:i*e.options.threshold;e.gsap.killTweensOf(e.tl),e.tween=e.gsap.to(e.tl,{timeScale:a,duration:e.options.speed,overwrite:e.options.overwrite,ease:e.options.ease}),s=!0}i=Math.sign(o),t=n},this.gsap.ticker.add(this.tickerFn)},i.destroy=function(){this.tickerFn&&(this.gsap.ticker.remove(this.tickerFn),this.tickerFn=null),this.tween&&this.tween.kill()},e}();l.pluginName="scroller",l.defaultOptions={speed:1,multiplier:.5,threshold:1,ease:"expo.out",overwrite:!0,bothDirection:!0,reversed:!1,stopOnEnd:!1,scrollProxy:null},e.Filler=o,e.Reeller=r,e.ScrollerPlugin=l,e.default=r});
//# sourceMappingURL=reeller.min.js.map